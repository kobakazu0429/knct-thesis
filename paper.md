###### tags: `卒研`

# 呉高専 卒業研究 予稿 下書き

[toc]

---

## はじめに

近年、小学生や中学生のプログラミング教育の必修化が進み、今後日本中の学生がプログラミングに触れることとなる。また多くの高専において情報系の学科では５年間を通じ、それ以外の学科でも低学年を中心にプログラミングを学ぶ機会がある。その際に用いられるプログラミング言語として C 言語が挙げられる。これは Arduino をはじめとするマイコンを制御するために欠かせないため、電気情報系の学生にとっては必修であることからも納得がいく。

また執筆者は呉工業高等専門学校 電気情報工学科に 5 年間在学し、情報・アルゴリズム・実験などでプログラミングをする機会の多さに対して、学生によって習得度合いが大きく違うことを感じた。その要因として、「授業方法や実習方法に問題がある場合」や「友達のコードを写し課題提出をこなし、理解していない場合」、「授業時間外でプログラミングをする機会が少ない場合」などが考えられた。これらから授業内容などが複雑化するほど「自分が何をしているか、何を作っているのかわからない」という問題が発生する。

## 研究方法と研究意義

本研究では、ブラウザ上で完結する学習環境を提案する。

これは学習者が PC に開発環境を用意する必要がなくなるため、プログラミングを始める壁を低くすることでき、自主学習を促すものである。

ブラウザ上で完結する学習環境に類するものに、「paiza.io[(https://paiza.io/ja)](https://paiza.io/ja)」といったブラウザ上で完結する実行環境というものがあるが、ブラウザ上でプログラムを記述し、サーバー側でコンパイル、実行などを行い、結果のみを返却、ユーザーに表示するものにある。標準入力についてはコンパイル時にサーバー側に送る必要があり、インタラクティブではないため、ユーザーは全ての動作を実行前に知っておく必要があり、制約も多い。

次に統合開発環境(IDE)も学習環境の一つとして挙げられるが、一般に推奨環境のスペックが高く、学校などの既存 PC からの置き換えや学生に対し、高額な PC の購入を求めることは難しい。
そこでブラウザ上で動作するこのシステムは安価で性能の低い PC などでも十分動作するため、現在の環境からへの移行が容易かつ素早く行える。

またテスト駆動開発(TDD)を取り入れることで従来のコンパイルや実行、標準入力による動作確認などを簡略化、時間短縮させることができ、トライアンドエラーの高速化、効率化を測ることで本来の学習に時間を割くことができるようになる。さらにテストケースから自分の作るプログラムの最終的な動作イメージを具体的につかむこともで、より完成や動作を意識した学習になると考える。

C 言語でテストを行うために GoogleTest [3] のようなテストフレームワークも存在するが、これらは設定やテストの記述が難解であり実行の手間も大きい。従って授業のようにテストを柔軟に変更、簡単に実施する必要があるため適さないと考える。
そして、先にも述べたブラウザ上で完結する実行環境にはテストまでをサポートしたものはなく、既存プロダクトでは本研究目的は達せない。

これらより、構築した学習環境で学習した結果、学生間における習得度のバラツキが抑えられるとともに、実験実習などへの理解を深めることも可能であると推察する。

## 実装方法と構築したシステムについて

<!-- ```mermaid
sequenceDiagram
    autonumber
    participant ユーザー
    participant ブラウザー
    participant サーバー

    ユーザー->>ブラウザー: プログラムの記述
    ブラウザー->>サーバー: プログラムの送信
    サーバー->>ブラウザー: wasmファイルへコンパイル
    ユーザー->>ブラウザー: 実行、テスト
    ブラウザー->>ユーザー: 結果の返却
``` -->

![](https://mermaid.ink/svg/pako:eNqNUd1KwzAUfpWR6_kCudiVPoG3vYltpoUlrWmCyBisCYgXChP8uxC1IEMRx0AnCkIf5jitb2FiO6jSgSGE5Hw_J4evj_wooAijhG4ryn26GpJNQZjHW3YRJSOu2AYV5TsmQoZ-GBMuW2DGYN5AP9uzCT0Fcwd6vJSgZ05uRj9oidctVzqdPx7Y4mdgHkBPXdlcQzopbs-LfLpQ_6I7g1qPJvXXMH3Ps0pd4zb13iEJA3MCOgN9A-Ye0hfQj2DsPior_5thPrkqsgMYpmD2QL-C2V_6-5oTbn3ORh-XF27k_Hh--ITaiFHBSBjY7PrOwkNyizLqIWyvAe0S1ZMe8vjAUlUcEEnXglBGAuEu6SW0jVy467vcR1gKRRekKv-KNfgG9iAXhg)

簡略化した本システムのシーケンス図を図 xx に示す。

![](https://i.imgur.com/3LHZDEB.png)

テストの様子を図 xx に示す。

実装した機能はコンパイル、実行、テスト、整形、ダウンロード、標準入出力、マウスホバーによるヒント、クイックフィックス、補完機能、自動保存、URL による共有、言語切り替え、環境変数、コマンドライン引数の変更などである。
整形とはルールに従ってプログラムの動作を変えずに見た目を整えるものである。マウスホバーによるヒントとは、変数や関数にマウスをホバーするとその説明や詳細が表示される機能である。クイックフィックスとは機械的に修正可能なものを修正する機能である（例：セミコロン忘れなど）。補完機能とは宣言済みの変数や関数、for 文などの構文を最初の数タイプするとメニューが表示され、選択すると自動で挿入されるものである。自動保存とは 500ms 毎にブラウザ自体にプログラム等を保存し、ブラウザを閉じても再度復元可能な機能である。URL による共有とはプログラムやテストなどを LZ 符号で符号化、圧縮化し、URL に付与することで、その URL に全ての状態を格納することができるため、他者が共有された URL をブラウザで開くことで同じ状態を再現できるものである。またテストとは、図 xx に示すように関数に対して単体テストを実施し、その結果を表示するものである。図 xx では add という二つの int 型の引数をとり、その引数同士を足し合わせた int 値を返す関数である。この例では引数に(1,2)の場合を渡し、返り値に 3 を期待している。下の例では 4 行目の実装が間違っているため返却値は期待値と異なり-1 となっている。

またこれらのテストなどは管理ページを別途設けており、そこから生成可能である。

## 本研究の評価について

本研究では構築したシステムが「はじめに」に記した通りの効果を得られるかどうかの評価に、呉工業高等専門学校 電気情報工学科に在学する学生に対し、執筆者が用意したテストを満たす関数を実装してもらい、その利便性や使い勝手などに関するアンケート調査を行なった。

![](https://i.imgur.com/Voe8R9w.png)

図 xxx は実際にアンケート調査時に使ったコードの一例である。
テストには正負が混ざった場合や、全て同一の値である場合などがあり、12 パターンを用意した。
この関数を実装する方法は何通りかあるが、多くの学生は if 文による評価を数回行うことで実装していた。その際に考慮漏れがある場合が多く、特に同一の値である場合には初期値に 0 を代入していたことにより、全く関係のない 0 を返してしまう場合もあった。

次にアンケート結果を、一部抜粋し執筆者の主観を交えながら論じる。
まず、アンケートには 17 名の学生が参加してくれた。

![](https://i.imgur.com/AKMLTrZ.png)

「1=とても苦手〜5=とても得意」という指標を設けた。多くの学生がプログラミングへ苦手意識を持っていることが伺える。

![](https://i.imgur.com/W5PQRKW.png)

Cygwin と TeraPad が最も多い。呉高専の演習用 PC には Visual Studio などのソフトも入っているが、補完機能等もない TeraPad が多く利用されている。これは演習室の PC スペック不足により、高機能な IDE などは使用できず、軽量な TeraPad が好まれているからだと考える。

![](https://i.imgur.com/4Xm0oET.png)

「ある、環境構築は簡単だった、めんどくさくなかった」という回答は 11.8%(2 人)と低く、自主学習への障壁の一つとなっていると考える。

![](https://i.imgur.com/WTz3mgo.png)

![](https://i.imgur.com/PMGQc7y.png)

多くの学生が現状に不満を抱いている

![](https://i.imgur.com/JWuEw5u.png)

![](https://i.imgur.com/ulgB4sc.png)

テスト機能が 100%と、非常に高評価を得ることができた。

![](https://i.imgur.com/zwOU0Ds.png)

URL 機能に関しては URL が長くなってしまい共有しにくい点などが挙げられた。

![](https://i.imgur.com/PkPq2xo.png)

---

その他アンケート

[授業で現在の学習方法から本システムに変更された場合、改善してほしい機能や追加してほしい機能があれば教えてください]

- アカウントに紐付いたクラウド保存機能。
- 別のライブラリを使うときはどうするのか気になった．
  - こちらに関しては今後複数ファイルのサポートなどにより改善可能
- エラーの赤い波線にマウスオーバーしたときの文章を日本語にできたら、苦手な人や初心者でもわかりやすいかなと思いました
  - こちらに関しては clang のエラー類がハードコーディングされているため、直接それらを翻訳、書き換え、ビルドし直す必要があるが基本は機械的変更可能

---

[本システムへ総括して意見や感想があれば教えてください]

- 画面がわかりやすい
- コードが共有しやすい
- テスト機能により失敗したときに何ができて何ができないのかということが場合分けされていたので間違いを分析しやすい
- エラー部分や誤字部分の箇所を知らせてくれて便利
- 動作速度が速い
- 括弧やクオーテーションを 2 回入力しなくて良いため楽
- web 上で完結していてすごい
- 自宅と学校を同じ環境にするのは大変だが、これなら自宅や寮などでも簡単に使用できるためわかりやすい

---

## まとめ

今回の研究では多くの学生が現在の授業方法に問題を感じていることと、構築したシステムで大きく改善されることがわかった。
実際の学習効果については授業などで本システムを使用し、その使用状況や使い勝手などを細かく調査する必要がある。そのためには授業で利用できるよう今回のアンケートで得られた不満点等を修正しなければならない。
特にアンケートでも得られた「コンパイルエラーを日本語表記にすること」は多くの学生がコンパイルエラーをきちんと読むことにつながるだろう。そのためには本システムで採用している Clang のエラー類がハードコーディングされているためそれを解決することが直近の課題である。

## 謝辞

卒業研究を実施するにあたり、ご協力頂いた方々に深く御礼申し上げます。
また本システムを実装するにあたり、使用した各種ライブラリのメンテナーに御礼申し上げます。

## URL

- https://github.com/kobakazu0429/wasm-c-web
- https://github.com/kobakazu0429/wasm-c-web-server
- https://github.com/kobakazu0429/clang-docker
- https://github.com/kobakazu0429/clang-deepl-translate

## 参考文献

[^1]: 蜂巣吉成,吉田敦,桑原寛明,阿草清滋, “Web ベースの C 言語プログラミング学習環境のための入力フォーム自動生成方法の提案(2019)” <https://doi.org/10.11309/jssst.36.4_18>
[^2]: paiza.IO <https://paiza.io/ja>
[^3]: GoogleTest - Google Testing and Mocking Framework <https://github.com/google/googletest>
[^4]: WebAssembly - Wikipedia <https://ja.wikipedia.org/wiki/WebAssembly>
[^5]: Cygwin - Wikipedia <https://ja.wikipedia.org/wiki/Cygwin>
[^6]: テスト駆動開発 - Wikipedia <https://ja.wikipedia.org/wiki/テスト駆動開発>
[^7]: Docker - Wikipedia <https://ja.wikipedia.org/wiki/Docker>
[^8]: Microsoft Visual Studio - Wikipedia <https://ja.wikipedia.org/wiki/Microsoft_Visual_Studio>
[^9]: 統合開発環境 - Wikipedia <https://ja.wikipedia.org/wiki/統合開発環境>
